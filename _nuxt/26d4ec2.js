(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{300:function(t,e,n){"use strict";n.r(e);var r=n(21);n(49),n(34),n(218),n(17),n(41),n(14),n(20),n(3),n(46),n(55),n(58);function c(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,l=!0,m=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return l=t.done,t},e:function(t){m=!0,c=t},f:function(){try{l||null==n.return||n.return()}finally{if(m)throw c}}}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var l={asyncData:function(t){return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.$axios,r=t.params,e.next=3,n.get("/api/v1/campaigns/".concat(r.id));case 3:return c=e.sent,e.abrupt("return",{campaign:c.data.data});case 5:case"end":return e.stop()}}),e)})))()},data:function(){return{campaign:{},test:{},carousel:{focus:""},newImages:[],newCoverImageIndex:-1}},methods:{shiftFocus:function(t){this.carousel.focus=t.target.firstElementChild.getAttribute("src")},displayNewImages:function(t){var e=t.target.files;this.newImages=Array.from(e,(function(img){return URL.createObjectURL(img)})),this.newCoverImageIndex=0},setNewCoverImage:function(i){this.newCoverImageIndex=this.newCoverImageIndex==i?-1:i},uploadImages:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var form,n,r,image,o,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(form=new FormData).append("cover_index",t.newCoverImageIndex),n=c(t.$refs.imagesInput.files);try{for(n.s();!(r=n.n()).done;)image=r.value,form.append("images",image)}catch(t){n.e(t)}finally{n.f()}return e.prev=4,o=t.$route.params.id,l={"Content-Type":"multipart/form-data"},e.next=9,t.$axios.post("/api/v1/campaigns/".concat(o,"/images"),form,l);case 9:t.$refs.imagesInput.value=null,t.newImages=[],t.newCoverImageIndex=-1,t.$router.app.refresh(),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),console.log(e.t0.response);case 18:case"end":return e.stop()}}),e,null,[[4,15]])})))()}},mounted:function(){this.carousel.focus=this.campaign.images.length>=1?this.campaign.cover_image:""}},m=n(24),component=Object(m.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"row mb-5"},[n("div",{staticClass:"col-9"},[n("div",{staticClass:"cg-carousel"},[n("div",{staticClass:"carousel-display"},[t.carousel.focus?n("img",{attrs:{src:t.carousel.focus,alt:""}}):n("div",{staticClass:"d-flex justify-content-center align-items-center"},[t._v("\n            Tidak ada gambar\n          ")])]),t._v(" "),n("div",{staticClass:"carousel-thumbnail-wrapper"},t._l(t.campaign.images,(function(image,i){return n("div",{key:i,staticClass:"carousel-thumbnail",class:{"mod-active":t.carousel.focus==image.filename},on:{click:t.shiftFocus}},[n("img",{attrs:{src:image.filename,alt:""}})])})),0)])]),t._v(" "),n("div",{staticClass:"col-3",staticStyle:{"background-color":"var(--cl-white)",padding:"24px","border-radius":"var(--border-radius-xs)",border:"1px solid var(--cl-lighter-gray)",height:"fit-content"}},[n("div",[n("div",{staticClass:"mb-4",staticStyle:{"font-size":"14px","font-weight":"400"}},[t._v("Project Leader")]),t._v(" "),n("div",{staticClass:"d-flex mb-3"},[n("img",{staticClass:"cg-ava mod-xs mr-3",attrs:{src:""==t.campaign.user.avatar?"/images/avatar.jpg":t.campaign.user.avatar}}),t._v(" "),n("div",{staticClass:"my-auto"},[n("div",{staticStyle:{"font-size":"20px","font-weight":"600"}},[t._v(t._s(t.campaign.user.name))]),t._v(" "),n("div",{staticStyle:{"font-size":"14px","font-weight":"400"}},[t._v(t._s(new Intl.NumberFormat("id-ID").format(t.campaign.backers_count))+" backers")])])]),t._v(" "),n("div",{staticClass:"gf-project-perks mb-3"},[n("div",{staticStyle:{"font-size":"14px","font-weight":"600"}},[t._v("What will you get:")]),t._v(" "),n("ul",t._l(t.campaign.perks.split("|"),(function(e){return n("li",{key:e},[n("span",[t._v(t._s(e))])])})),0)])])])]),t._v(" "),n("div",{staticClass:"row mb-5"},[n("div",{staticClass:"col-9"},[n("div",{staticClass:"mb-3",staticStyle:{"font-size":"28px","font-weight":"500"}},[t._v("Manage project images")]),t._v(" "),n("div",{staticClass:"mb-2"},[n("input",{ref:"imagesInput",attrs:{type:"file",multiple:""},on:{change:t.displayNewImages}})]),t._v(" "),n("div",t._l(t.newImages,(function(image,i){return n("div",{key:i,staticClass:"cg-highlight ic-select mr-2 mb-2",class:{"mod-active":t.newCoverImageIndex==i},on:{click:function(e){return t.setNewCoverImage(i)}}},[n("img",{staticClass:"cg-thumbnail mod-sm",attrs:{src:image}})])})),0),t._v(" "),n("div",{staticClass:"mb-3"},[t._v("Click one image to set as a cover. Leave them as it is if you don't want to change.")]),t._v(" "),n("div",[n("button",{staticClass:"cg-btn cl-secondary",on:{click:t.uploadImages}},[t._v("Save")])])])]),t._v(" "),n("div",{staticClass:"row mb-5"},[n("div",{staticClass:"col-8"},[n("h1",{staticClass:"mb-1",staticStyle:{"font-size":"36px","font-weight":"500"}},[t._v(t._s(t.campaign.name))]),t._v(" "),n("h2",{staticClass:"mb-4",staticStyle:{"font-size":"18px","font-weight":"300"}},[t._v(t._s(t.campaign.highlight))]),t._v(" "),n("div",{staticClass:"progress mb-2"},[n("div",{staticClass:"progress-bar progress-bar-striped",style:"width:"+t.campaign.current_amount/t.campaign.goal_amount*100+"%"})]),t._v(" "),n("div",{staticClass:"d-flex justify-content-between mb-4",staticStyle:{"font-size":"24px"}},[n("div",[t._v(t._s((t.campaign.current_amount/t.campaign.goal_amount*100).toFixed(2))+"%")]),t._v(" "),n("div",{staticStyle:{"font-weight":"600"}},[t._v("Rp "+t._s(new Intl.NumberFormat("id-ID").format(t.campaign.goal_amount)))])]),t._v(" "),n("div",{staticClass:"project-description",staticStyle:{"font-size":"18px"}},t._l(t.campaign.description.split("\n"),(function(e){return n("p",{key:e},[t._v("\n          "+t._s(e)+"\n        ")])})),0)])]),t._v(" "),n("NuxtLink",{staticClass:"cg-btn cl-secondary",attrs:{to:"./"+t.$route.params.id+"/edit"}},[t._v("Edit Project")])],1)}),[],!1,null,null,null);e.default=component.exports}}]);